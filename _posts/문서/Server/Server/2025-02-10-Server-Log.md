---
categories:
- Server
date: '2025-02-10'
title: '[Server] Log'
---

{% raw %}
### Level
로그 레벨은 소프트웨어 개발 및 운영에서 로그 메시지의 중요도를 분류하기 위해 표준화된 방식으로 사용됩니다.

1. **TRACE**: 가장 세부적인 로그로, 프로그램의 실행 흐름을 상세히 기록합니다. 매우 세부적인 디버깅이 필요할 때 사용합니다.
2. **DEBUG**: 디버깅 목적으로 사용되며, 개발 중에 주로 활성화합니다. 개발 중에 시스템의 동작을 확인할 때 사용합니다.
3. **INFO**: 시스템의 정상적인 동작과 관련된 주요 이벤트를 기록합니다. 시스템 상태를 모니터링할 때 사용합니다.
4. **WARN**: 문제를 일으킬 가능성이 있는 상황을 나타냅니다. 비정상적이지만 치명적이지 않은 문제를 기록할 때 사용합니다.
5. **ERROR**: 심각한 문제를 나타내며, 예외 상황을 기록합니다. 복구가 필요한 치명적인 문제를 기록할 때 사용합니다.
6. **FATAL** : 치명적인 오류를 기록하며, 프로그램이 종료될 수 있는 상황을 나타냅니다.

### 로그 포맷
로그 출력 양식(포맷)은 로그 데이터를 어떻게 구조화할지, 어떤 정보를 포함할지에 대한 규격을 의미합니다. 이는 로그 분석 및 모니터링 시스템에서 데이터를 쉽게 처리할 수 있도록 도와줍니다. 일반적으로 로그 양식은 **텍스트 형식**이나 **JSON 형식**으로 출력되며, 각각의 형식은 특정 상황에 유리할 수 있습니다. 이 외에도 **로그 레벨**, **타임스탬프**, **호스트 정보**, **요청 ID** 등의 추가적인 필드를 포함시켜서 로그를 구조화하는 경우가 많습니다.

#### 텍스트 형식
텍스트 형식은 사람이 읽기 쉬운 형태로 로그를 출력하는 방법입니다. 이는 디버깅이나 간단한 모니터링에 유용하지만, 로그를 대규모로 처리하거나 분석하는 데는 불편할 수 있습니다.

```
INFO [2025-02-10 12:30:45] UserLoginService - 로그인 성공, UserID: 12345
ERROR [2025-02-10 12:31:00] UserLoginService - 로그인 실패, 오류: 잘못된 비밀번호
```

#### JSON 형식
JSON 형식은 **구조화된 데이터**를 표현하기 위한 형식으로, 로그 분석 도구에서 쉽게 처리할 수 있는 장점이 있습니다. `Pino`와 같은 로깅 라이브러리에서는 기본적으로 JSON 형식으로 로그를 출력합니다. JSON 형식으로 로그를 출력하면 각 로그 항목이 **필드**로 정의되어 있기 때문에, 필터링이나 검색이 용이해집니다.

```
{
  message: 'User login attempted',
  userId: 12345,
  requestId: 'req-xyz',
  ipAddress: '192.168.0.1',
  method: 'POST',
  url: '/api/login',
  location: {
    file: 'userController.js',
    function: 'login',
    line: 25,
  },
};
```

#### 로그 출력 양식에서 포함할 수 있는 정보
로그 양식에는 다양한 정보가 포함될 수 있습니다. 여기서는 흔히 사용되는 항목들을 나열해 보겠습니다.

- **타임스탬프 (`time`)**: 로그가 생성된 시간.
- **로그 레벨 (`level`)**: `info`, `warn`, `error`, `debug` 등 로그의 중요도.
- **메시지 (`msg`)**: 실제 로그 내용.
- **요청 ID (`reqId`)**: 특정 요청을 추적할 수 있도록 하는 ID. 주로 분산 시스템에서 유용.
- **사용자 정보 (`userId`, `userName`)**: 로그가 발생한 사용자의 정보.
- **서비스 이름 (`service`)**: 로그를 발생시킨 서비스의 이름.
- **호스트 정보 (`host`)**: 로그가 발생한 서버의 호스트명이나 IP.
- **에러 정보 (`error`)**: 오류가 발생한 경우 에러 메시지 또는 스택 트레이스.
- **추가 데이터 (`data`)**: 로그에 포함된 특정 데이터나 상태 정보.

### 로그 객체 타입 (javascript)
외부 라이브러리나 시스템에서 던지는 예외 타입이 매우 다양할 수 있기 때문에, 일일이 모든 가능성을 체크하는 것은 비효율적이고 불가능할 수 있습니다. 예외가 어떤 타입이 올지 모르기 때문에, 예외를 처리하는 방식에 대해 좀 더 유연하고, 실용적인 접근이 필요합니다.

이럴 경우, `any`나 `unknown`을 사용하면서 예외가 발생할 때마다 처리 방식에 따라 적절한 대응을 해야 합니다. 각 예외에 대해 일일이 타입을 체크하는 것보다는, **기본적인 오류 처리 패턴을 따르고, 가능한 한 안전한 방식으로 예외를 다루는 것**이 중요합니다.
{% endraw %}