---
categories:
- Algorithm
date: '2022-05-02'
title: '[Algorithm] 역추적 배열'
---

{% raw %}
## 역추적 배열
`역추적 배열`은 현재 위치에 대해 이전 위치를 기록해 경로를 출력하거나 목표 위치로 추적할 수 있는 접근 테크닉이다.

역추적 배열을 탐색할 때는 얻은 이전 위치를 다시 역추적 배열의 인덱스로 활용해 그 다음 이전 위치를 얻는 과정을 연쇄적으로 반복하는 방식으로 이동한다. 마지막 위치에는 위치로 사용되지 않는 값을 저장해 탐색의 끝을 알린다.

여러 탐색 분기 중에서 목표 경로 하나를 출력하거나(ex. `DP`, `DFS/BFS`, `최단거리 알고리즘`),  현재 위치에서 마지막 위치로 이동하는 용도로 활용된다. (ex. `Disjoint Set`)

### 사용 방법
1. 역추적 배열을 생성한다.
	- 배열 인덱스는 현재 위치(=노드 번호, 상태), 배열의 값은 이전 위치를 기록.
	- 초기 값으로 위치로 사용되지 않는 값(ex. 음의 정수)을 저장한다.
3. 현재 위치 pos를 탐색할 때, 이전 위치 prev를 기록한다.
	- trace[pos] = prev
4. 현재 위치에서 경로를 출력해야 한다면, 역추적 배열을 사용한다.
	- 얻은 위치 값을 인덱스로 활용하여 마지막 위치까지 이동한다.
	- 경로를 출력할 때는 일반적으로 마지막에서 처음 방향으로 탐색하기 때문에 역방향으로 출력될 수 있다. 이때는 `스택` 등을 활용해서 정방향으로 출력하면 된다.

```
stack<int> stk;
int pos = start;
while (pos != -1)		// 역추적 배열 탐색
{
	stk.push(pos);
	pos = trace[pos];
}
while (!stk.empty())	// 정방향 출력
{
	printf("%d", stk.top());
	stk.pop();
}
```

## 연관 문제
<br>https://www.acmicpc.net/problem/12852
<br>https://www.acmicpc.net/problem/9019
<br>https://www.acmicpc.net/problem/9252
{% endraw %}