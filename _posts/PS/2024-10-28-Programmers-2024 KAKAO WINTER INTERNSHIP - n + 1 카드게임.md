---
categories:
- Programmers
date: '2024-10-28'
title: '[Programmers] 2024 KAKAO WINTER INTERNSHIP - n + 1 카드게임'
---

{% raw %}
> Lv. 3<br>

## 문제
당신은 1~`n`  사이의 수가 적힌 카드가 하나씩 있는 카드 뭉치와 동전  `coin`개를 이용한 게임을 하려고 합니다. 카드 뭉치에서 카드를 뽑는 순서가 정해져 있으며, 게임은 다음과 같이 진행합니다.

1.  처음에 카드 뭉치에서 카드  `n/3`장을 뽑아 모두 가집니다. (`n`은 6의 배수입니다.) 당신은 카드와 교환 가능한 동전  `coin`개를 가지고 있습니다.
2.  게임은 1라운드부터 시작되며, 각 라운드가 시작할 때 카드를 두 장 뽑습니다. 카드 뭉치에 남은 카드가 없다면 게임을 종료합니다. 뽑은 카드는 카드 한 장당 동전 하나를 소모해 가지거나, 동전을 소모하지 않고 버릴 수 있습니다.
3.  카드에 적힌 수의 합이  `n+1`이 되도록 카드 두 장을 내고 다음 라운드로 진행할 수 있습니다. 만약 카드 두 장을 낼 수 없다면 게임을 종료합니다.

예를 들어  `n`  = 12,  `coin`  = 4이고 [3, 6, 7, 2, 1, 10, 5, 9, 8, 12, 11, 4] 순서대로 카드를 뽑도록 카드 뭉치가 섞여 있습니다.

처음에 3, 6, 7, 2 카드 4장(=  `n/3`)과 동전 4개(=  `coin`)를 가지고 시작합니다. 다음 라운드로 진행하기 위해 내야 할 카드 두 장에 적힌 수의 합은 13(=  `n+1`)입니다. 다음과 같은 방법으로 최대 5라운드까지 도달할 수 있습니다.

1.  1라운드에서 뽑은 카드 1, 10을 동전 두 개를 소모해서 모두 가집니다. 카드 3, 10을 내고 다음 라운드로 진행합니다. 이때 손에 남은 카드는 1, 2, 6, 7이고 동전이 2개 남습니다.
2.  2라운드에서 뽑은 카드 5, 9를 동전을 소모하지 않고 모두 버립니다. 카드 6, 7을 내고 다음 라운드로 진행합니다. 이때 손에 남은 카드는 1, 2고 동전이 2개 남습니다.
3.  3라운드에서 뽑은 카드 8, 12 중 동전 한 개를 소모해서 카드 12를 가집니다. 카드 1, 12을 내고 다음 라운드로 진행합니다. 이때 손에 남은 카드는 2이고 동전이 1개 남습니다.
4.  4라운드에서 뽑은 카드 11, 4 중 동전 한 개를 소모해서 카드 11을 가집니다. 카드 2, 11을 내고 다음 라운드로 진행합니다. 이때 손에 남은 카드와 동전은 없습니다.
5.  5라운드에서 카드 뭉치에 남은 카드가 없으므로 게임을 종료합니다.

처음에 가진 동전수를 나타내는 정수  `coin`과 카드를 뽑는 순서대로 카드에 적힌 수를 담은 1차원 정수 배열  `cards`가 매개변수로 주어질 때, 게임에서 도달 가능한 최대 라운드의 수를 return 하도록 solution 함수를 완성해 주세요.

### 제한사항

-   0 ≤  `coin`  ≤  `n`
-   6 ≤  `cards`의 길이 =  `n`  < 1,000
    -   `cards[i]`는  `i+1`번째로 뽑는 카드에 적힌 수를 나타냅니다.
    -   1 ≤  `cards[i]`  ≤  `n`
    -   `cards`의 원소는 중복되지 않습니다.
-   `n`은 6의 배수입니다.

## 해결
- 카드 덱에 있는 수는 유일하며, 임의의 수가 주어지면 반드시 짝이 결정됩니다.
- 덱에 있는 카드 쌍은 턴을 버틸 수 있는 생명과 같습니다.
- 카드 쌍에서 하나만 있으면 아무런 의미가 없으며, 항상 쌍을 맞춰야 이득입니다. 앞쪽의 카드 구매, 뒤쪽의 카드를 각각 구매하는 것은 뒤쪽에 있는 카드를 가격 2로 구매하는 것과 동일합니다.
- 초기 덱에 없는 서로 매칭되는 카드 2개를 구매하는 것보다, 초기 덱에 쌍이 존재하는 카드 1개를 구매하는 것이 항상 이득입니다. => `그리디`<br>
- 만약 서로 매칭되는 카드 2개를 만났다면, 보류합니다. 추후 생명이 부족하다면 보류한 카드 쌍을 코인으로 구매하여 보충합니다. 이때 코인이 부족하다면 게임이 종료됩니다.

예제를 정리하면 다음과 같습니다:
```
N = 12
[3, 6, 7, 2] | [1, 10, 5, 9, 8, 12, 11, 4] 
       turn  |  -   1  -  -  3   3   4  4
      price  |  -   1  -  -  2   2   1  2
```

게임 과정은 다음과 같습니다: 
```
1. 현재 턴 카드 조사
	- 가격 1이면 코인 소모하여 구매: 생명 +1
	- 가격 2라면 보류
2. 다음 턴으로 넘어갈 수 있는지 확인:
	- (생명) >= (현재 턴): 통과
	- 그렇지 않다면 보류한 카드 쌍을 코인 소모하여 구매: 생명 +1
		- 구매할 수 없다면 게임 끝
```

## 코드
```
#include <vector>
using namespace std;
int N, turn, coin, life, items, price[1001];
bool hasFirstCard[1001], hasCard[1001];
vector<int> cards;<br>

void shop(int card) {
    if (price[card] == 1 && coin > 0)<br>
        coin--, life++;
    if (price[card] == 2)
        items++;
}

int solution(int coinInput, vector<int> cardsInput) {<br>
    coin = coinInput; cards = cardsInput; N = cards.size();
    for (int i = 0; i < N / 3; i++) {
        if (hasFirstCard[N + 1 - cards[i]])
            life++;
        hasFirstCard[cards[i]] = 1;
    }
    for (int i = N / 3; i < N; i++) {
        if (hasFirstCard[N + 1 - cards[i]])
            price[cards[i]] = 1;
        if (hasCard[N + 1 - cards[i]])
            price[cards[i]] = 2;
        hasCard[cards[i]] = 1;
    }
    for (; turn < N / 3; turn++) {
        int idx = N / 3 + turn * 2;
        shop(cards[idx]), shop(cards[idx + 1]);
        if (life < turn + 1) {
            if (items > 0 && coin > 1)<br>
                items--, coin -= 2, life++;
            else
                break;
        }
    }
    return turn + 1;
}
```

## 링크
https://school.programmers.co.kr/learn/courses/30/lessons/258707
{% endraw %}