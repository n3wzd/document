---
categories:
- PCG
date: '2024-05-26'
title: '[PCG] Tile-based Algorithms'
---

{% raw %}
타일 기반 알고리즘(Tile-based Algorithms)은 미리 정의된 타일 세트를 사용하여 맵을 생성하는 방법입니다. 각 타일은 특정한 속성과 규칙을 가지며, 이 타일들을 조합하여 일관성 있고 의미 있는 맵을 생성합니다. 타일 기반 알고리즘은 다양한 게임 장르에서 맵과 레벨을 설계하는 데 널리 사용됩니다.

1. **타일(Tile)**:
	- 맵을 구성하는 기본 단위로, 각 타일은 특정 속성(예: 지형, 장애물, 아이템 등)을 가집니다.
2. **타일 세트(Tile Set)**: 
	- 사용 가능한 타일들의 집합으로, 다양한 타일이 포함될 수 있습니다.
3. **타일 규칙(Tile Rules)**:
	- 타일이 어떻게 배치될지 결정하는 규칙으로, 타일 간의 연결성과 일관성을 유지합니다.

### Wave Function Collapse
Wave Function Collapse(WFC)는 주어진 타일 세트를 이용해 일관성 있고 의미 있는 패턴을 생성하는 방법입니다. 이 알고리즘은 양자역학의 Wave Function Collapse 개념에서 영감을 받아 이름 지어졌지만, 실제로는 타일 기반 맵 생성에 활용되는 기법입니다.

1. **타일 세트(Tile Set)**:
	- 사용 가능한 타일들의 집합입니다.
	- 각 타일은 특정 속성과 패턴을 가집니다.
2. **타일 제약(Tile Constraints)**:
	- 타일이 인접할 수 있는 규칙을 정의합니다.
	- 어떤 타일이 다른 타일 옆에 배치될 수 있는지 규칙을 통해 결정합니다.
3. **슈퍼포지션(Superposition)**:
	- 각 타일의 가능한 상태를 나타내며, 초기 상태에서는 모든 타일이 모든 가능한 상태를 가질 수 있습니다.
4. **엔트로피(Entropy)**:
	- 특정 타일이 가질 수 있는 상태의 수로, 엔트로피가 낮을수록 타일의 상태가 덜 불확실합니다.

작동 원리는 다음과 같습니다.

1. **초기화(Initialization)**:
	- 맵의 각 위치에 대해 가능한 모든 타일 상태(슈퍼포지션)를 설정합니다.
2. **관찰(Observation)**:
	- 가장 낮은 엔트로피(가장 불확실성이 적은)의 위치를 선택하여 하나의 타일 상태로 축소합니다.
	- 이 과정에서 타일 제약을 고려합니다.
3. **프로파게이션(Propagation)**:
	- 선택된 타일 상태가 인접한 위치에 미치는 영향을 계산하여, 인접 위치의 가능한 타일 상태를 갱신합니다.
	- 이 과정은 주변 타일들의 엔트로피를 낮춥니다.
4. **반복(Iteration)**:
	- 모든 위치의 타일 상태가 결정될 때까지 관찰과 프로파게이션 과정을 반복합니다.

## Binary Space Partitioning
Binary Space Partitioning (BSP, 이진 공간 분할)은 컴퓨터 그래픽스, 게임 개발, 맵 생성 등에서 공간을 효율적으로 관리하고 구조화하기 위해 사용되는 알고리즘입니다. 특히 던전 생성과 같은 구조적 맵 생성에 많이 활용됩니다. BSP는 공간을 반복적으로 이진 분할하여 트리 구조로 표현하며, 각 분할 영역을 다양한 목적으로 사용할 수 있습니다.

1. **분할(Partitioning)**:
	- 공간을 둘로 나누는 작업입니다.
	- 각 분할은 다시 하위 분할될 수 있습니다.
2. **노드(Node)**:
	- 트리 구조에서 각 분할을 나타내며, 루트 노드에서 시작하여 하위 노드로 계속 분할됩니다.
3. **리프(Leaf)**:
	- 더 이상 분할되지 않는 최종 노드로, 실제 방, 구역 또는 타일을 나타낼 수 있습니다.
4. **트리(Tree)**:
	- 전체 공간을 표현하는 계층적 구조입니다.
	- 각 노드는 하나의 분할을 나타내며, 리프는 최종 공간을 나타냅니다.

작동 원리는 다음과 같습니다.

1. **초기화(Initialization)**:
	- 전체 공간을 하나의 루트 노드로 시작합니다.
2. **분할(Partitioning)**:
	- 루트 노드를 기준으로 공간을 두 개의 하위 공간으로 분할합니다.
	- 분할 방법은 수평 또는 수직으로 나눌 수 있습니다.
3. **재귀적 분할(Recursive Partitioning)**:
	- 각 하위 공간을 다시 분할합니다.
	- 이 과정은 더 이상 분할할 수 없을 때까지(예: 최소 크기 도달) 반복됩니다.
4. **리프 생성(Leaf Creation)**:
	- 최종 분할된 공간(리프)은 실제로 사용할 방이나 구역으로 변환됩니다.
5. **연결(Connection)**:
	- 리프들을 서로 연결합니다. 던전의 경우, 방과 방을 연결하는 복도를 생성합니다.

## 랜덤 타일 배치 (Random Tile Placement)
랜덤 타일 배치는 타일 기반 맵 생성 방법 중 하나로, 규칙에 의한 제한 없이 타일을 무작위로 배치하는 간단한 알고리즘입니다. 이 방법은 구현이 매우 간단하고 빠르지만, 결과가 일관성 없고 무작위적일 수 있습니다. 그럼에도 불구하고, 특정 유형의 게임이나 프로토타입을 빠르게 생성해야 할 때 유용할 수 있습니다.

1. **타일(Tile)**:
	- 맵을 구성하는 기본 단위로, 각 타일은 특정 속성(예: 지형, 아이템, 장애물 등)을 가집니다.
2. **무작위 배치(Random Placement)**:
	- 각 타일을 아무런 규칙 없이 무작위로 배치합니다.

작동 원리는 다음과 같습니다.

1. **타일 세트(Tile Set)**:
	- 사용할 타일들의 집합을 정의합니다.
2. **무작위 배치(Random Placement)**:
	- 맵의 각 위치에 대해 타일 세트에서 무작위로 타일을 선택하여 배치합니다.
{% endraw %}