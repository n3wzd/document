---
categories:
- Design
date: '2025-01-14'
title: '[Design] Backend'
---

{% raw %}
### 동적 사용자 이메일 (Gmail, Outlook 등)
 `application.properties`나 `application.yml`에 모든 이메일 서버 정보를 넣거나, DB 또는 별도의 설정 파일에서 관리하고, 사용자가 선택한 이메일 제공자에 맞는 SMTP 설정을 동적으로 로드할 수 있습니다.

### 이메일 발송 기록: DB vs 로그
- **DB**에 저장하는 것이 이메일 발송 내역을 관리하고 분석하는 데 더 유리하며, **장기적인 관리**가 필요할 경우 적합합니다.
- **로그**는 간단한 기록과 **단기적인 추적**에 유용하며, 성능을 중요시하거나 이메일 발송 내역을 복잡하게 관리할 필요가 없는 경우 적합합니다.

### 적당한 토큰 지속시간
- **Access Token**: 15분 ~ 1시간
- **Refresh Token**: 7일 ~ 30일
- **인증용 토큰**: 10분 ~ 24시간

### DB 데이터 가공
데이터를 가공하는 방법은 애플리케이션 레벨에서 계산하는 방법과 SQL에서 계산하여 반환하는 방법이 있습니다.
- 단순하고 대규모 데이터셋에 대해 성능이 중요한 경우 SQL에서 계산하여 반환하는 것이 좋습니다.
- 복잡한 비즈니스 로직이나 외부 서비스 호출을 포함하는 경우, 애플리케이션 레벨에서 계산하는 것이 더 적합합니다.

### WebSocket 연결 유지와 인증
웹소켓은 지속적인 연결을 유지하는 특징이 있기 때문에, 한 번 연결될 때마다 인증을 한 번만 수행하고, 이후에는 연결이 유지되는 동안 인증을 반복하지 않는 것이 일반적입니다.

인증을 매 메시지마다 처리하는 것보다는 연결이 처음 성립할 때 한 번만 인증하고, 그 후로는 인증을 하지 않도록 하는 것이 성능 측면에서 더 효율적입니다.

### 동시성 보장
- 공유 자원 줄이기: 공유 자원의 접근을 줄이고, 필요한 경우 `타임스탬프`와 같은 방법을 사용해 데이터 독립성을 확보합니다.
- 원자성 보장: 덮어쓰기보다는 원자적 연산을 사용하여 비동기 환경에서의 충돌을 예방합니다.

### 테스트 API
테스트 API는 별도의 컨트롤러로 분리하는 것이 좋습니다. 이는 여러 가지 이유로 코드의 유지 보수성과 가독성을 높이는 데 도움이 됩니다. 테스트용 API를 별도로 분리하면 코드의 명확성을 유지하고, 실제 운영 환경에 영향을 미치지 않도록 할 수 있습니다.

성능 테스트를 할 때, 실제 API를 모방한 테스트용 API를 만드는 것이 좋습니다.
{% endraw %}