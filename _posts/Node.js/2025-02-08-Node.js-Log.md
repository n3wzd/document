---
categories:
- Node.js
date: '2025-02-08'
title: '[Node.js] Log'
---

{% raw %}
로그 시스템을 선택할 때는 여러 요인을 고려해야 합니다. 주로 **성능**, **사용 편리성**, **확장성**, **기능** 등을 기준으로 선택할 수 있습니다. 각 도구가 가진 장단점을 비교하여 가장 적합한 로그 패키지를 선택하는 것이 중요합니다.

1. **Winston**
    - 매우 널리 사용되는 로깅 라이브러리로 문서와 커뮤니티 지원이 강력합니다.
    - 다양한 트랜스포트를 지원(콘솔, 파일, 원격 서버 등).
    - 로그 포맷, 레벨, 출력 경로 등을 유연하게 설정할 수 있습니다.
    - `winston-daily-rotate-file`과 같은 추가 패키지를 통해 로그 파일 로테이션 및 관리도 용이합니다.
2. **Pino**
    - 성능이 뛰어난 경량화된 JSON 기반 로그 라이브러리로, 많은 로그를 다뤄야 하는 고성능 시스템에 적합합니다.
    - 기본적으로 빠르고 비동기적으로 작동하여 성능에 민감한 환경에 유리합니다.
    - JSON 포맷 로그를 기본으로 사용하여 구조화된 데이터를 쉽게 처리할 수 있습니다.
3. **Log4js**
    - 유연하고, 다양한 설정을 제공하여 로깅을 세밀하게 조정할 수 있습니다.
    - 로그 수준과 필터링을 세밀하게 설정할 수 있어, 고급 기능이 필요한 경우 유용합니다.

선택:
- **고성능을 중시하는 경우**: `Pino`는 경량화되어 성능이 뛰어나며, 빠르게 동작하는 시스템에서 유리합니다. 만약 빠른 속도와 높은 처리량이 요구되는 경우에 적합합니다.
- **유연성과 기능을 중시하는 경우**: `Winston`은 다양한 트랜스포트를 지원하고 설정이 유연하여 다양한 요구 사항을 처리할 수 있습니다. 큰 프로젝트나 로그의 출력을 세밀하게 설정하고 싶은 경우에 유용합니다.

### Pino
**Pino**는 Node.js용 고성능 JSON 로깅 라이브러리입니다. `Pino`는 로그를 빠르고 효율적으로 기록하고, JSON 형식으로 출력을 기본으로 제공하여 로그 데이터를 쉽게 처리하고 분석할 수 있게 해줍니다.

1. **고성능**:
    - `Pino`는 **성능**을 최우선으로 고려한 라이브러리입니다. 이를 위해 비동기적으로 로그를 처리하며, 로그를 기록하는 데 드는 비용을 최소화하고 있습니다.
    - 높은 처리량의 시스템에서도 우수한 성능을 발휘합니다.
2. **JSON 기반 로그**:
    - Pino는 로그를 **JSON 형식**으로 출력합니다. 이 방식은 로그를 구조화하여 쉽게 파싱하고 분석할 수 있게 해줍니다.
    - JSON 형식의 로그는 **Kibana**와 같은 로그 분석 도구와 잘 호환됩니다. 즉, 실시간 모니터링 및 대시보드 분석에 매우 유리합니다.
3. **간단한 사용법**:
    - 사용법이 간단하고 직관적입니다. `Pino`는 로그 수준 (예: `info`, `warn`, `error` 등)을 지원하며, 로그 메시지에 추가적인 메타데이터를 포함할 수 있습니다.

#### 기본 설정
기본적으로 `Pino`는 **콘솔**에 로그를 출력합니다.
```javascript
const pino = require('pino');

// 로거 인스턴스 생성
const logger = pino({
  level: 'info',  // 기본 레벨을 'info'로 설정
});

logger.info('이것은 정보 로그입니다'); // 출력됨
logger.error('이것은 오류 로그입니다'); // 출력됨
logger.debug('이것은 디버그 로그입니다'); // 출력되지 않음 (레벨 'info' 이상만 출력)
```

#### 파일 저장
파일에 로그를 저장하려면 `pino`의 스트림 기능을 이용하여 파일에 로그를 출력할 수 있습니다. 예를 들어, `pino.destination()`을 사용하여 로그를 파일에 저장할 수 있습니다.

```javascript
const pino = require('pino');
const fs = require('fs');

// 로그를 'logfile.log'에 저장
const logger = pino({
  level: 'info',  // 로그 레벨 설정
}, pino.destination('./logfile.log'));

logger.info('이것은 정보 로그입니다');  // 'logfile.log' 파일에 저장됩니다.
```

`pino`의 여러 스트림을 설정하여 콘솔과 파일에 동시에 출력할 수 있습니다.
```javascript
const pino = require('pino');
const fs = require('fs');

// 파일 스트림과 콘솔 스트림을 설정
const streams = [
  { stream: process.stdout },   // 콘솔에 출력
  { stream: fs.createWriteStream('./logfile.log', { flags: 'a' }) } // 파일에 출력
];

const logger = pino({
  level: 'info',
}, pino.multistream(streams));

logger.info('이것은 정보 로그입니다');  // 콘솔과 'logfile.log' 파일에 동시에 출력됩니다.
```
{% endraw %}