---
categories:
- Programmers
date: '2024-12-02'
title: '[Programmers] 연습문제 - 연속 펄스 부분 수열의 합'
---

{% raw %}
> Lv. 3<br>

## 문제
어떤 수열의 연속 부분 수열에 같은 길이의 펄스 수열을 각 원소끼리 곱하여 연속 펄스 부분 수열을 만들려 합니다. 펄스 수열이란 [1, -1, 1, -1 …] 또는 [-1, 1, -1, 1 …] 과 같이 1 또는 -1로 시작하면서 1과 -1이 번갈아 나오는 수열입니다.  
예를 들어 수열 [2, 3, -6, 1, 3, -1, 2, 4]의 연속 부분 수열 [3, -6, 1]에 펄스 수열 [1, -1, 1]을 곱하면 연속 펄스 부분수열은 [3, 6, 1]이 됩니다. 또 다른 예시로 연속 부분 수열 [3, -1, 2, 4]에 펄스 수열 [-1, 1, -1, 1]을 곱하면 연속 펄스 부분수열은 [-3, -1, -2, 4]이 됩니다.  
정수 수열  `sequence`가 매개변수로 주어질 때, 연속 펄스 부분 수열의 합 중 가장 큰 것을 return 하도록 solution 함수를 완성해주세요.

### 제한 사항
-   1 ≤  `sequence`의 길이 ≤ 500,000
-   -100,000 ≤  `sequence`의 원소 ≤ 100,000
    -   `sequence`의 원소는 정수입니다.

## 해결
임의의 구간 중에서 펄스 수열을 곱했을 때 합이 최대인 것을 찾아야 합니다.

하지만 구간마다 펄스 수열 곱하지 않아도 됩니다. 임의의 구간에서 펄스 수열은 곱한 것은, 펄스 수열을 곱한 전체 수열에서 임의의 구간을 선택한 것과 같기 때문입니다. 따라서 전체 수열에서 펄스 수열을 곱한 것을 A, B라고 했을 때, 정답은 max(A에서 최대 구간 합, B에서 최대 구간 합)입니다.

다음으로 음수가 존재하는 구간 최대 합을 구해 봅시다. 수열을 순차 탐색했을 때, 현재 구간의 합이 새로운 값으로 인해 합이 음수가 된다면 손해이며, 이 때는 구간 합을 초기화해야 합니다. => `그리디`<br>

이 방법을 이용해서 최대 합을 찾을 수 있습니다:
```
수열 순회:
1. 다음 원소가 양수: 구간 합에 더하기
2. 다음 원소가 음수: (구간 합 < 다음 수의 크기)면 구간 합 0으로 초기화
	- 그렇지 않으면 구간 합에 더하기
3. 정답(구간 합 최대) 업데이트
```

## 코드
```
#include <vector>
using namespace std;
typedef long long ll;

ll solve(vector<int> S) {<br>
    ll sum = 0, res = 0;
    for(auto n : S) {
        sum = -n < sum ? sum + n : 0;
        res = max(res, sum);
    }
    return res;
}

ll solution(vector<int> S) {<br>
    vector<int> A, B;<br>
    for(int i = 0; i < S.size(); i++) {
        A.push_back(S[i] * (i % 2 == 0 ? -1 : 1));
        B.push_back(S[i] * (i % 2 == 1 ? -1 : 1));
    }
    return max(solve(A), solve(B));
}
```

## 링크
https://school.programmers.co.kr/learn/courses/30/lessons/161988<br>
{% endraw %}