---
categories:
- BOJ
date: '2022-02-25'
title: '[BOJ] 1932 - 계단 오르기'
---

{% raw %}
>실버 III

## 문제

계단 오르기 게임은 계단 아래 시작점부터 계단 꼭대기에 위치한 도착점까지 가는 게임이다. 각각의 계단에는 일정한 점수가 쓰여 있는데 계단을 밟으면 그 계단에 쓰여 있는 점수를 얻게 된다.

계단 오르는 데는 다음과 같은 규칙이 있다.

1.  계단은 한 번에 한 계단씩 또는 두 계단씩 오를 수 있다. 즉, 한 계단을 밟으면서 이어서 다음 계단이나, 다음 다음 계단으로 오를 수 있다.
2.  연속된 세 개의 계단을 모두 밟아서는 안 된다. 단, 시작점은 계단에 포함되지 않는다.
3.  마지막 도착 계단은 반드시 밟아야 한다.

따라서 첫 번째 계단을 밟고 이어 두 번째 계단이나, 세 번째 계단으로 오를 수 있다. 하지만, 첫 번째 계단을 밟고 이어 네 번째 계단으로 올라가거나, 첫 번째, 두 번째, 세 번째 계단을 연속해서 모두 밟을 수는 없다.

각 계단에 쓰여 있는 점수가 주어질 때 이 게임에서 얻을 수 있는 총 점수의 최댓값을 구하는 프로그램을 작성하시오. 계단의 개수는 300이하의 자연수이고, 계단에 쓰여 있는 점수는 10,000이하의 자연수이다.

##  해결
모든 경우를 탐색해서 최대를 찾는 DP 문제.

현재 상태를 계단 위치+콤보(연속으로 밟은 계단 수)로 정의한다.
> DP(i, combo) = <br>
> if (i > n || combo > 1) 0<br>
> if (i < n) stair(i) + max(DP(i + 1, combo + 1), DP(i + 2, 0)) // (max ≠ 0)<br>
> if (i = n) stair(i)<br>

i는 계단 번호이며, 범위는 [1, n]이다. DP(i, combo)의 반환 값은 현재 상태에서 최댓값이며, 메모이제이션을 통해 기록된다. stair(i)는 i 위치의 계단 점수를 반환한다. i = n일 때는 계단의 종착점이다.

계단의 종착점을 넘거나(i > n, n - 1번 계단에서 2단 점프) 연속된 계단을 2번 밟는 것은 불가능하므로 0을 반환하여 집계되지 않도록 한다. max에서 2가지 선택지 모두 불가능한 케이스도 존재하는데, 이 때는 마찬가지로 0을 반환하여 집계하지 않는다. (n - 1, 1)가 이러한 사례에 해당된다.

**Tip.**
메모이제이션을 사용할 때, 결과 값을 저장하는 캐시는 현재 상태에 대해 일대일 대응이 되어야 한다. 즉, 현재 상태를 인덱스로 사용해야 한다. 만일 cache(i, combo)로 하지 않고 cache(i)로 한다면 현재 상태에 일대일 대응이 되지 않기에 부정확한 결과가 출력될 수 있다.

**다른 아이디어**
현재 상태를 계단 위치로만 정의한다. 현재 상태에서 콤보를 저장하지 않는 대신, 점화식에서 콤보를 고려해 가능한 케이스들만 확인하게 한다. 이 방법으로 하면 캐시를 1차원 배열(cache[i])로 할 수 있다.

## 코드
```
#include <iostream>
#include <cmath>
using namespace std;

int n;
int stair[302] = { 0, };
int cache[302][3] = { 0, };

int DP(int i, int combo)
{
	if (i > n || combo > 1) return 0;
	if (i == n) return stair[i];
	if (cache[i][combo] != 0) return cache[i][combo];

	int next = max(DP(i + 1, combo + 1), DP(i + 2, 0));
	if (next == 0) return 0;

	cache[i][combo] = stair[i] + next;
	return cache[i][combo];
}

int main()
{
	cin >> n;
	for (int i = 1; i <= n; i++)
		cin >> stair[i];

	cout << DP(0, -1) << endl;
	return 0;
}
```

## 링크
<br>https://www.acmicpc.net/problem/2579
{% endraw %}