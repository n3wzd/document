---
categories:
- Programmers
date: '2024-12-01'
title: '[Programmers] 연습문제 - 아방가르드 타일링'
---

{% raw %}
> Lv. 3<br>

## 문제
정우는 예술적 감각이 뛰어난 타일공입니다. 그는 단순한 타일을 활용하여 불규칙하면서도 화려하게 타일링을 하곤 합니다.

어느 날 정우는 가로 길이  `n`, 세로 길이 3 인 판을 타일링하는 의뢰를 맡았습니다. 아방가르드한 디자인 영감이 떠오른 정우는 다음과 같은 두 가지 종류의 타일로 타일링을 하기로 결정했습니다.    
각 타일은 90도씩 회전할 수 있으며 타일의 개수는 제한이 없습니다.

`n`이 주어졌을 때, 이 두 가지 종류의 타일로  `n`  x 3 크기의 판을 타일링하는 방법의 수를 return 하도록 solution 함수를 완성해주세요.

### 제한 사항
-   1 ≤  `n`  ≤ 100,000
-   결과는 매우 클 수 있으므로 1,000,000,007 로 나눈 나머지를 return합니다.

## 해결
`BOJ - 2133 - 타일 채우기`와 유사한 `DP` 문제입니다.

현재 상태를 타일 세로 길이 (`n`), 계산 결과는 타일 경우의 수입니다. 점화식은 `i`열과 `n` - `i`열을 분리해서 채우는 방향으로 설계합니다. 열의 길이가 정해졌을 때, 타일을 열에 대해 분리할 수 없게 배치하는 경우의 수는 다음과 같습니다.

|c|경우의 수|
|---|---|
|1|1|
|2|2|
|3|5|
|4|2|
|5|2|
|6|4|
|7|2|
|8|2|
|9|4|

`c` = 6부터는 길이 3인 막대 타일을 눕힌 채로 사이에 배치하는 방식으로 연장이 가능합니다. 이를 정리하면, 4부터는 { 2, 2, 4 } 수열이 반복되며 이를 기반으로 점화식을 설계합니다.

> DP(n) = DP(n - 1) × 1 + DP(n - 2) × 2 + DP(n - 3) × 5 + DP(n - 4) × 2 + DP(n - 5) × 2 + DP(n - 6) × 4 + ...<br>

나이브한 수행 시간은 O(N<sup>2</sup>)으로, 시간 초과가 날 수 있으므로 최적화를 해야 합니다. 뒷부분은 반복되는 구간의 합이므로 저장이 가능합니다. => `누적 합`<br>

{ 2, 2, 4 } 구간만 새로 계산하고 나머지는 이전에 계산한 누적 합을 가져오면 됩니다. 최종 점화식은 다음과 같습니다.

> PS(n) = DP(n - 4) × 2 + DP(n - 5) × 2 + DP(n - 6) × 4 + PS(n - 3)<br>
> DP(n) = DP(n - 1) × 1 + DP(n - 2) × 2 + DP(n - 3) × 5 + PS(n)<br>

수가 충분히 크므로 `모듈러 연산`을 중간에 적용합니다.

## 코드
```
typedef long long ll;
const ll p = 1e9 + 7;
ll DP[100001] = { 1, 1, }, PS[100001], A[] = { 0, 1, 2, 5 };
ll add(ll a, ll b) { return (a + b) % p; }
ll mul(ll a, ll b) { return (a * b) % p; }

int solution(int n) {
    for(int i = 2; i <= n; i++) {
        for(int d = 1; d <= 3 && i >= d; d++)
            DP[i] = add(DP[i], mul(DP[i - d], A[d]));
        for(int d = 4; d <= 6 && i >= d; d++)
            PS[i] = add(PS[i], mul(DP[i - d], (d % 3 == 0 ? 4 : 2)));
        if (i >= 3)
            PS[i] = add(PS[i], PS[i - 3]);
        DP[i] = add(DP[i], PS[i]);
    }
    return DP[n];
}
```

## 링크
https://school.programmers.co.kr/learn/courses/30/lessons/181186<br>
{% endraw %}